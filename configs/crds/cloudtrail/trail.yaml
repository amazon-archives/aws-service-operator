---
apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  name: trails.cloudtrail.awsoperator.io
spec:
  group: cloudtrail.awsoperator.io
  versions:
  - name: v1alpha1
    served: true
    storage: true
  scope: Namespaced
  names:
    plural: trails
    singular: trail
    kind: Trail
    shortNames: []
    categories:
    - aws
    - cloudtrail
  additionalPrinterColumns:
  - name: Status
    type: string
    description: Status for the AWS CloudFormation stack.
    JSONPath: ".status.reason"
  - name: Message
    type: string
    description: Message accompanying it's current stack status.
    JSONPath: ".status.message"
    priority: 1
  - name: Created At
    type: date
    description: When the resource was created
    JSONPath: ".metadata.creationTimestamp"
  subresources:
    status: {}
  validation:
    openAPIV3Schema:
      properties:
        spec:
          description: http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudtrail-trail.html
          type: object
          required:
          - isLogging
          - s3BucketName
          properties:
            cloudWatchLogsLogGroupRef:
              description: http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudtrail-trail.html#cfn-cloudtrail-trail-cloudwatchlogsloggrouparn
              type: string
            cloudWatchLogsRoleRef:
              description: http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudtrail-trail.html#cfn-cloudtrail-trail-cloudwatchlogsrolearn
              type: string
            enableLogFileValidation:
              description: http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudtrail-trail.html#cfn-cloudtrail-trail-enablelogfilevalidation
              type: boolean
            eventSelectors:
              description: http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudtrail-trail.html#cfn-cloudtrail-trail-eventselectors
              type: array
              items:
                type: object
                properties:
                  dataResources:
                    description: http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cloudtrail-trail-eventselector.html#cfn-cloudtrail-trail-eventselector-dataresources
                    type: array
                    customAttributes:
                      template: DataResources
                      immutable: false
                    items:
                      type: object
                      properties:
                        type:
                          description: http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cloudtrail-trail-dataresource.html#cfn-cloudtrail-trail-dataresource-type
                          type: string
                          customAttributes:
                            template: Type
                            immutable: false
                          enum:
                          - AWS::Lambda::Function
                          - AWS::S3::Object
                        values:
                          description: http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cloudtrail-trail-dataresource.html#cfn-cloudtrail-trail-dataresource-values
                          type: array
                          customAttributes:
                            template: Values
                            immutable: false
                          items:
                            type: string
                  includeManagementEvents:
                    description: http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cloudtrail-trail-eventselector.html#cfn-cloudtrail-trail-eventselector-includemanagementevents
                    type: boolean
                    customAttributes:
                      template: IncludeManagementEvents
                      immutable: false
                  readWriteType:
                    description: http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cloudtrail-trail-eventselector.html#cfn-cloudtrail-trail-eventselector-readwritetype
                    type: string
                    customAttributes:
                      template: ReadWriteType
                      immutable: false
                    enum:
                    - All
                    - ReadOnly
                    - WriteOnly
            includeGlobalServiceEvents:
              description: http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudtrail-trail.html#cfn-cloudtrail-trail-includeglobalserviceevents
              type: boolean
            isLogging:
              description: http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudtrail-trail.html#cfn-cloudtrail-trail-islogging
              type: boolean
            isMultiRegionTrail:
              description: http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudtrail-trail.html#cfn-cloudtrail-trail-ismultiregiontrail
              type: boolean
            kMSKeyRef:
              description: http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudtrail-trail.html#cfn-cloudtrail-trail-kmskeyid
              type: string
            s3BucketName:
              description: http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudtrail-trail.html#cfn-cloudtrail-trail-s3bucketname
              type: string
            s3KeyPrefix:
              description: http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudtrail-trail.html#cfn-cloudtrail-trail-s3keyprefix
              type: string
            snsTopicName:
              description: http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudtrail-trail.html#cfn-cloudtrail-trail-snstopicname
              type: string
            tags:
              description: http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cloudtrail-trail.html#cfn-cloudtrail-trail-tags
              type: array
              items:
                type: object
                properties:
                  key:
                    description: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-resource-tags.html#cfn-resource-tags-key
                    type: string
                    customAttributes:
                      template: Key
                      immutable: false
                  value:
                    description: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-resource-tags.html#cfn-resource-tags-value
                    type: string
                    customAttributes:
                      template: Value
                      immutable: false
